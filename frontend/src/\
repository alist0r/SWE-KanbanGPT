import axios from 'axios';
import { Board_Container } from "../sub-components/board-container";

const new_button_handler = (f: Function, board_id: int) => {
	return () => {
		f(board_id);
	}
}

const select_board_button = (board_id: int, board_name: string, walk_board_view: Function) => {
	const button_handler = new_button_handler(walk_board_view, board_id);
	return () => {
		return (
			<div>
			 <button onClick={button_handler}>{board_name}</button>
			</div>
		)
	}
}

const create_board = () => {
	return () => {
		return (
			<div>
			 <button>create new project</button>
			</div>
		)
	}
}

const Board_select = (walk_board_view: Function) => {
	const New_Project = create_board();
	const token = localStorage.getItem("access_token");
	console.log(token);
	//api expects usr id but i dont know how to get that from token, hardcoding here for testing
	const USERID = 2;
	const url: string = "http://localhost:8000/api/users/"+USERID+"/projects";
	var res;
	axios.get(url, {headers: { 'Accept': 'application/json' }})
	.then(response => {
		console.log(response.data);
		res = response.data;
	})
	.catch(error => {
		console.error('axios get err', error);
	})
	return () => { 
		return (
			<>
			 <New_Project />
			 <Board_Container boards={res} />
			</>
		)
	}
}

export { Board_select }
